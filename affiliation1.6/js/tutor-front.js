(()=>{var t={623:()=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var n,a,i=[],r=!0,s=!1;try{for(o=o.call(t);!(r=(n=o.next()).done)&&(i.push(n.value),!e||i.length!==e);r=!0);}catch(t){s=!0,a=t}finally{try{r||null==o.return||o.return()}finally{if(s)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}window.tutor_get_nonce_data=function(t){var e=(o=window._tutorobject||{}).nonce_key||"",o=o[e]||"";return t?{key:e,value:o}:(t=o,(o=e)in(e={})?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e)},window.tutor_popup=function(t,e,o){var n,a=this;return this.popup_wrapper=function(t){var n=""===e?"":'<img class="tutor-pop-icon" src="'+window._tutorobject.tutor_url+"assets/images/"+e+'.svg"/>';return"<"+t+' class="tutor-component-popup-container">            <div class="tutor-component-popup-'+o+'">                <div class="tutor-component-content-container">'+n+'</div>                <div class="tutor-component-button-container"></div>            </div>        </'+t+">"},this.popup=function(e){var o=e.title?"<h3>"+e.title+"</h3>":"",i=e.description?"<p>"+e.description+"</p>":"",r=Object.keys(e.buttons||{}).map((function(o){var n=e.buttons[o];o=n.id?"tutor-popup-"+n.id:"";return t('<button id="'+o+'" class="tutor-button tutor-button-'+n.class+'">'+n.title+"</button>").click(n.callback)})),s=(n=t(a.popup_wrapper(e.wrapper_tag||"div"))).find(".tutor-component-content-container");s.append(o),e.after_title&&s.append(e.after_title),s.append(i),e.after_description&&s.append(e.after_description),n.click((function(){t(this).remove()})).children().click((function(t){t.stopPropagation()}));for(var u=0;u<r.length;u++)n.find(".tutor-component-button-container").append(r[u]);return t("body").append(n),n},{popup:this.popup}},window.tutorDotLoader=function(t){return'    \n    <div class="tutor-dot-loader '.concat(t||"",'">\n        <span class="dot dot-1"></span>\n        <span class="dot dot-2"></span>\n        <span class="dot dot-3"></span>\n        <span class="dot dot-4"></span>\n    </div>')},window.tutor_date_picker=function(){var t;jQuery.datepicker&&(t=_tutorobject.wp_date_format||"yy-mm-dd",$(".tutor_date_picker").datepicker({dateFormat:t}))},jQuery(document).ready((function(o){"use strict";var n=(h=wp.i18n).__;function a(){var t;jQuery.datepicker&&(t=_tutorobject.wp_date_format||"yy-mm-dd",o(".tutor_date_picker").datepicker({dateFormat:t})),o(document).on("keydown",".hasDatepicker, .tutor_date_picker",(function(t){8!==t.keyCode&&t.preventDefault()}))}function i(){o(".tutor-field-slider").each((function(){var t=o(this),e=t.closest(".tutor-field-type-slider").find('input[type="hidden"]'),n=t.closest(".tutor-field-type-slider").find(".tutor-field-type-slider-value"),a=parseFloat(t.closest(".tutor-field-type-slider").attr("data-min")),i=parseFloat(t.closest(".tutor-field-type-slider").attr("data-max"));t.slider({range:"max",min:a,max:i,value:e.val(),slide:function(t,o){n.text(o.value),e.val(o.value)}})}))}function r(t){var e=t.element;return o('<span><i class="tutor-icon-'+o(e).data("icon")+'"></i> '+t.text+"</span>")}function s(){jQuery().sortable&&(o(".course-contents").sortable({handle:".course-move-handle",start:function(t,e){e.placeholder.css("visibility","visible")},stop:function(t,e){u()}}),o(".tutor-lessons:not(.drop-lessons)").sortable({connectWith:".tutor-lessons",items:"div.course-content-item",start:function(t,e){e.placeholder.css("visibility","visible")},stop:function(t,e){u()}}))}function u(){var t={};o(".tutor-topics-wrap").each((function(e,n){var a=o(this),i=parseInt(a.attr("id").match(/\d+/)[0],10),r={};a.find(".course-content-item").each((function(t,e){var n=o(this);n=parseInt(n.attr("id").match(/\d+/)[0],10);r[t]=n})),t[e]={topic_id:i,lesson_ids:r}})),o("#tutor_topics_lessons_sorting").val(JSON.stringify(t))}function c(){return{init:function(){o(document).on("click",".tutor-select .tutor-select-option",(function(t){t.preventDefault();var e=o(this);"true"!==e.attr("data-is-pro")?(t=e.html().trim(),e.closest(".tutor-select").find(".select-header .lead-option").html(t),e.closest(".tutor-select").find(".select-header input.tutor_select_value_holder").val(e.attr("data-value")).trigger("change"),e.closest(".tutor-select-options").hide(),disableAddoption()):alert("Tutor Pro version required")})),o(document).on("click",".tutor-select .select-header",(function(t){t.preventDefault(),o(this).closest(".tutor-select").find(".tutor-select-options").slideToggle()})),this.setValue(),this.hideOnOutSideClick()},setValue:function(){o(".tutor-select").each((function(){var t=o(this).find(".tutor-select-option");t.length&&t.each((function(){var t,e=o(this);"selected"===e.attr("data-selected")&&(t=e.html().trim(),e.closest(".tutor-select").find(".select-header .lead-option").html(t),e.closest(".tutor-select").find(".select-header input.tutor_select_value_holder").val(e.attr("data-value")))}))}))},hideOnOutSideClick:function(){o(document).mouseup((function(t){var e=o(".tutor-select-options");o(t.target).closest(".select-header").length||e.is(t.target)||0!==e.has(t.target).length||e.hide()}))},reInit:function(){this.setValue()}}}h._x,h._n,h._nx,a(),i(),jQuery().select2&&o(".videosource_select2").select2({width:"100%",templateSelection:r,templateResult:r,allowHtml:!0}),o(document).on("change",".tutor_lesson_video_source",(function(t){var e=o(this),n=o(this).val();n?o(".video-metabox-source-input-wrap").show():o(".video-metabox-source-input-wrap").hide(),e.closest(".tutor-option-field").find(".video-metabox-source-item").hide(),e.closest(".tutor-option-field").find(".video_source_wrap_"+n).show()})),o(document).on("click",".tutor-course-thumbnail-upload-btn",(function(t){t.preventDefault();var e,a=o(this);e||(e=wp.media({title:n("Select or Upload Media Of Your Chosen Persuasion","tutor"),button:{text:n("Use this media","tutor")},multiple:!1})).on("select",(function(){var t=e.state().get("selection").first().toJSON();a.closest(".tutor-thumbnail-wrap").find(".thumbnail-img").attr("src",t.url),a.closest(".tutor-thumbnail-wrap").find("input").val(t.id),o(".tutor-course-thumbnail-delete-btn").show()})),e.open()})),o(document).on("click",".tutor-course-thumbnail-delete-btn",(function(t){t.preventDefault();var e=o(this);t=e.closest(".tutor-thumbnail-wrap").find(".thumbnail-img").attr("data-placeholder-src");e.closest(".tutor-thumbnail-wrap").find(".thumbnail-img").attr("src",t),e.closest(".tutor-thumbnail-wrap").find("input").val(""),o(".tutor-course-thumbnail-delete-btn").hide()})),o(document).on("click",".create_new_topic_btn",(function(t){t.preventDefault(),o(".tutor-metabox-add-topics").slideToggle()})),o(document).on("click","#tutor-add-topic-btn",(function(t){t.preventDefault();var e=o(this);(t=e.closest(".tutor-metabox-add-topics").find("input, textarea").serializeObject()).action="tutor_add_course_topic",o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:t,beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){t.success&&(o("#tutor-course-content-wrap").html(t.data.course_contents),e.closest(".tutor-metabox-add-topics").find('input[type!="hidden"], textarea').each((function(){o(this).val("")})),e.closest(".tutor-metabox-add-topics").slideUp(),s())},complete:function(){e.removeClass("tutor-updating-message")}})})),o(".tutor-zoom-meeting-modal-wrap").on("submit",".tutor-meeting-modal-form",(function(t){t.preventDefault();var e=o(this),a=e.serializeObject();t=Intl.DateTimeFormat().resolvedOptions().timeZone;a.timezone=t;var i=e.find('button[type="submit"]');o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:a,beforeSend:function(){i.addClass("tutor-updating-message")},success:function(t){t.success?tutor_toast(n("Success","tutor"),i.data("toast_success_message"),"success"):tutor_toast(n("Update Error","tutor"),n("Meeting Update Failed","tutor"),"error"),t.course_contents?(o(t.selector).html(t.course_contents),"#tutor-course-content-wrap"==t.selector&&s(),o(".tutor-zoom-meeting-modal-wrap").removeClass("show")):location.reload()},complete:function(){i.removeClass("tutor-updating-message")}})})),o(document).on("change keyup",".course-edit-topic-title-input",(function(t){t.preventDefault(),o(this).closest(".tutor-topics-top").find(".topic-inner-title").html(o(this).val())})),o(document).on("click",".topic-edit-icon",(function(t){t.preventDefault(),o(this).closest(".tutor-topics-top").find(".tutor-topics-edit-form").slideToggle()})),o(document).on("click",".tutor-topics-edit-button",(function(t){t.preventDefault();var e=o(this),n=e.closest(".tutor-topics-wrap"),a=(t=parseInt(n.attr("id").match(/\d+/)[0],10),e.closest(".tutor-topics-wrap").find('[name="topic_title"]').val());n=e.closest(".tutor-topics-wrap").find('[name="topic_summery"]').val();o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{topic_title:a,topic_summery:n,topic_id:t,action:"tutor_update_topic"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){t.success&&(e.closest(".tutor-topics-wrap").find("span.topic-inner-title").text(a),e.closest(".tutor-topics-wrap").find(".tutor-topics-edit-form").slideUp())},complete:function(){e.removeClass("tutor-updating-message")}})})),o(document).on("click",".open-tutor-lesson-modal",(function(t){t.preventDefault();var e=o(this),n=e.attr("data-lesson-id"),a=e.attr("data-topic-id"),i=o("#post_ID").val();o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{lesson_id:n,topic_id:a,course_id:i,action:"tutor_load_edit_lesson_modal"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){o(".tutor-lesson-modal-wrap .modal-container").html(t.data.output),o(".tutor-lesson-modal-wrap").attr({"data-lesson-id":n,"data-topic-id":a}).addClass("show"),t=(t=tinyMCEPreInit.mceInit.tutor_editor_config)||tinyMCEPreInit.mceInit.course_description,tinymce.init(t),tinymce.execCommand("mceRemoveEditor",!1,"tutor_lesson_modal_editor"),tinyMCE.execCommand("mceAddEditor",!1,"tutor_lesson_modal_editor"),o(document).trigger("lesson_modal_loaded",{lesson_id:n,topic_id:a,course_id:i})},complete:function(){quicktags({id:"tutor_lesson_modal_editor"}),e.removeClass("tutor-updating-message")}})})),o(document).on("click",".lesson_thumbnail_upload_btn",(function(t){t.preventDefault();var e,a=o(this);e||(e=wp.media({title:n("Select or Upload Media Of Your Chosen Persuasion","tutor"),button:{text:n("Use this media","tutor")},multiple:!1})).on("select",(function(){var t=e.state().get("selection").first().toJSON();a.closest(".tutor-thumbnail-wrap").find(".thumbnail-img").html('<img src="'+t.url+'" alt="" /><a href="javascript:;" class="tutor-lesson-thumbnail-delete-btn"><i class="tutor-icon-line-cross"></i></a>'),a.closest(".tutor-thumbnail-wrap").find("input").val(t.id),o(".tutor-lesson-thumbnail-delete-btn").show()})),e.open()})),o(document).on("click",".tutor-lesson-thumbnail-delete-btn",(function(t){t.preventDefault(),(t=o(this)).closest(".tutor-thumbnail-wrap").find("._lesson_thumbnail_id").val(""),t.closest(".tutor-thumbnail-wrap").find(".thumbnail-img").html(""),t.hide()})),o(document).on("click",".tutor-delete-lesson-btn",(function(t){var e;t.preventDefault(),confirm(n("Are you sure?","tutor"))&&(t=(e=o(this)).attr("data-lesson-id"),o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{lesson_id:t,action:"tutor_delete_lesson_by_id"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){t.success&&e.closest(".course-content-item").remove()},complete:function(){e.removeClass("tutor-updating-message")}}))})),o(document).on("click",".topic-delete-btn a",(function(t){o(this).attr("data-topic-id"),confirm(n("Are you sure to delete?","tutor"))||t.preventDefault()})),o(document).on("click",".tutor-expand-all-topic",(function(t){t.preventDefault(),o(".tutor-topics-body").slideDown(),o(".expand-collapse-wrap i").removeClass("tutor-icon-light-down").addClass("tutor-icon-light-up")})),o(document).on("click",".tutor-collapse-all-topic",(function(t){t.preventDefault(),o(".tutor-topics-body").slideUp(),o(".expand-collapse-wrap i").removeClass("tutor-icon-light-up").addClass("tutor-icon-light-down")})),o(document).on("click",".topic-inner-title, .expand-collapse-wrap",(function(t){t.preventDefault(),(t=o(this)).closest(".tutor-topics-wrap").find(".tutor-topics-body").slideToggle(),t.closest(".tutor-topics-wrap").find(".expand-collapse-wrap i").toggleClass("tutor-icon-light-down tutor-icon-light-up")})),o(document).on("click",".quiz-modal-btn-first-step",(function(t){t.preventDefault();var e,n,a,r=o(this),s=o('[name="quiz_title"]'),u=s.val();t=o('[name="quiz_description"]').val();u?(s.closest(".tutor-quiz-builder-group").find(".quiz_form_msg").html(""),e=o("#post_ID").val(),n=r.closest(".tutor-modal-wrap").attr("quiz-for-post-id"),o("#tutor_quiz_builder_quiz_id").length?(a=o("#tutor_quiz_builder_quiz_id").val(),o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{quiz_title:u,quiz_description:t,quiz_id:a,topic_id:n,action:"tutor_quiz_builder_quiz_update"},beforeSend:function(){r.addClass("tutor-updating-message")},success:function(t){o("#tutor-quiz-"+a).html(t.data.output_quiz_row),o('#tutor-quiz-modal-tab-items-wrap a[href="#quiz-builder-tab-questions"]').trigger("click"),i()},complete:function(){r.removeClass("tutor-updating-message")}})):o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{quiz_title:u,quiz_description:t,course_id:e,topic_id:n,action:"tutor_create_quiz_and_load_modal"},beforeSend:function(){r.addClass("tutor-updating-message")},success:function(t){o(".tutor-quiz-builder-modal-wrap .modal-container").html(t.data.output),o("#tutor-topics-"+n+" .tutor-lessons").append(t.data.output_quiz_row),o('#tutor-quiz-modal-tab-items-wrap a[href="#quiz-builder-tab-questions"]').trigger("click"),i(),o(document).trigger("quiz_modal_loaded",{topic_id:n,course_id:e})},complete:function(){r.removeClass("tutor-updating-message")}})):s.closest(".tutor-quiz-builder-group").find(".quiz_form_msg").html("Please enter quiz title")})),o(document).on("click",".open-tutor-quiz-modal",(function(t){t.preventDefault();var e=o(this),n=e.attr("data-quiz-id"),a=e.attr("data-topic-id");null==a&&(a=e.closest(".tutor-modal-wrap").attr("quiz-for-post-id"));var r=o("#post_ID").val();o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{quiz_id:n,topic_id:a,course_id:r,action:"tutor_load_edit_quiz_modal"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){o(".tutor-quiz-builder-modal-wrap .modal-container").html(t.data.output),o(".tutor-quiz-builder-modal-wrap").attr("data-quiz-id",n).attr("quiz-for-post-id",a).addClass("show"),e.attr("data-back-to-tab")&&(t=e.attr("data-back-to-tab"),o('#tutor-quiz-modal-tab-items-wrap a[href="'+t+'"]').trigger("click")),o(document).trigger("quiz_modal_loaded",{quiz_id:n,topic_id:a,course_id:r}),i(),jQuery().sortable&&o(".quiz-builder-questions-wrap").sortable({handle:".question-sorting",start:function(t,e){e.placeholder.css("visibility","visible")},stop:function(t,e){var n;n={},o(".quiz-builder-question-wrap").each((function(t,e){var a=o(this);a=parseInt(a.attr("data-question-id"),10);n[t]=a})),o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{sorted_question_ids:n,action:"tutor_quiz_question_sorting"}})}})},complete:function(){e.removeClass("tutor-updating-message")}})})),o(document).on("click",".quiz-modal-settings-save-btn",(function(t){t.preventDefault();var e=o(this),a=o(".tutor-quiz-builder-modal-wrap").attr("data-quiz-id"),i=o("#current_topic_id_for_quiz").val();(t=o("#quiz-builder-tab-settings :input, #quiz-builder-tab-advanced-options :input").serializeObject()).topic_id=i,t.quiz_id=a,t.action="tutor_quiz_modal_update_settings",o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:t,beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){t.success&&o("#tutor-course-content-wrap").html(t.data.course_contents),t.success?tutor_toast(n("Success","tutor"),e.data("toast_success_message"),"success"):tutor_toast(n("Update Error","tutor"),n("Quiz Update Failed","tutor"),"error")},complete:function(){e.removeClass("tutor-updating-message"),"modal_close"===e.attr("data-action")&&o(".tutor-modal-wrap").removeClass("show")}})})),o(document).on("click",".quiz-modal-question-save-btn",(function(t){t.preventDefault();var e=o(this),n=o(".quiz_question_form :input").serializeObject();n.action="tutor_quiz_modal_update_question",t=e.closest(".tutor-modal-wrap").attr("quiz-for-post-id"),n.topic_id=t,o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:n,beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){t.success?e.closest(".tutor-quiz-builder-modal-contents").find(".open-tutor-quiz-modal").trigger("click"):void 0!==t.data&&o("#quiz_validation_msg_wrap").html(t.data.validation_msg)},complete:function(){e.removeClass("tutor-updating-message")}})})),o(document).on("click",".modal-close-btn",(function(t){t.preventDefault(),o(".tutor-modal-wrap").removeClass("show")})),o(document).on("keyup",(function(t){27===t.keyCode&&o(".tutor-modal-wrap").removeClass("show")})),o(document).on("click",".tutor-add-quiz-btn",(function(t){t.preventDefault();var e=o(this),n=o(this).closest(".tutor_add_quiz_wrap").attr("data-add-quiz-under");t=o(this).data("topic-id");o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{quiz_for_post_id:n,current_topic_id:t,action:"tutor_load_quiz_builder_modal"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){o(".tutor-quiz-builder-modal-wrap .modal-container").html(t.data.output),o(".tutor-quiz-builder-modal-wrap").attr("quiz-for-post-id",n).addClass("show")},complete:function(){e.removeClass("tutor-updating-message")}})})),o(document).on("click",".tutor-quiz-modal-tab-item",(function(t){t.preventDefault();var e=o(this),n=o('[name="quiz_title"]');n.val()?(n.closest(".tutor-quiz-builder-form-row").find(".quiz_form_msg").html(""),t=e.attr("href"),o(".quiz-builder-tab-container").hide(),o(t).show(),o("a.tutor-quiz-modal-tab-item").removeClass("active"),e.addClass("active")):n.closest(".tutor-quiz-builder-form-row").find(".quiz_form_msg").html('<p class="quiz-form-warning">Please save the quiz first</p>')})),o(document).on("click",".quiz-modal-btn-next, .quiz-modal-btn-back",(function(t){t.preventDefault(),t=o(this).attr("href"),o('#tutor-quiz-modal-tab-items-wrap a[href="'+t+'"]').trigger("click")})),o(document).on("click",".quiz-modal-tab-navigation-btn.quiz-modal-btn-cancel",(function(t){t.preventDefault(),o(".tutor-modal-wrap").removeClass("show")})),o(document).on("click",".tutor-quiz-open-question-form",(function(t){t.preventDefault();var e=o(this),n={quiz_id:o("#tutor_quiz_builder_quiz_id").val(),course_id:n=o("#post_ID").val(),action:"tutor_quiz_builder_get_question_form"};(t=e.attr("data-question-id"))&&(n.question_id=t),o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:n,beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){o(".tutor-quiz-builder-modal-contents").html(t.data.output),c().reInit(),jQuery().sortable&&o("#tutor_quiz_question_answers").sortable({handle:".tutor-quiz-answer-sort-icon",start:function(t,e){e.placeholder.css("visibility","visible")},stop:function(t,e){var n;n={},o(".tutor-quiz-answer-wrap").each((function(t,e){var a=o(this);a=parseInt(a.attr("data-answer-id"),10);n[t]=a})),o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{sorted_answer_ids:n,action:"tutor_quiz_answer_sorting"}})}}),disableAddoption()},complete:function(){e.removeClass("tutor-updating-message")}})})),o(document).on("click",".tutor-quiz-question-trash",(function(t){t.preventDefault();var e=o(this);t=e.attr("data-question-id");o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{question_id:t,action:"tutor_quiz_builder_question_delete"},beforeSend:function(){e.closest(".quiz-builder-question-wrap").remove()}})})),o(document).on("click",".add_question_answers_option:not(.disabled)",(function(t){t.preventDefault();var e=o(this),n=e.attr("data-question-id");(t=o(".quiz_question_form :input").serializeObject()).question_id=n,t.action="tutor_quiz_add_question_answers",o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:t,beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){o("#tutor_quiz_question_answer_form").html(t.data.output),disableAddoption()},complete:function(){e.removeClass("tutor-updating-message")}})})),o(document).on("click",".tutor-quiz-answer-edit a",(function(t){t.preventDefault();var e=o(this);t=e.closest(".tutor-quiz-answer-wrap").attr("data-answer-id");o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{answer_id:t,action:"tutor_quiz_edit_question_answer"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){o("#tutor_quiz_question_answer_form").html(t.data.output)},complete:function(){e.removeClass("tutor-updating-message")}})})),o(document).on("click","#quiz-answer-save-btn",(function(t){t.preventDefault();var e=o(this);(t=o(".quiz_question_form :input").serializeObject()).action="tutor_save_quiz_answer_options",o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:t,beforeSend:function(){o("#quiz_validation_msg_wrap").html(""),e.addClass("tutor-updating-message")},success:function(t){o("#tutor_quiz_question_answers").trigger("refresh")},complete:function(){e.removeClass("tutor-updating-message")}})})),o(document).on("click","#quiz-answer-edit-btn",(function(t){t.preventDefault();var e=o(this);(t=o(".quiz_question_form :input").serializeObject()).action="tutor_update_quiz_answer_options",o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:t,beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){o("#tutor_quiz_question_answers").trigger("refresh")},complete:function(){e.removeClass("tutor-updating-message")}})})),o(document).on("change",".tutor-quiz-answers-mark-correct-wrap input",(function(t){t.preventDefault();var e=o(this),n=e.val();t=1;e.prop("checked")||(t=0),o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{answer_id:n,inputValue:t,action:"tutor_mark_answer_as_correct"}})})),o(document).on("refresh","#tutor_quiz_question_answers",(function(t){t.preventDefault();var e=o(this),n=e.attr("data-question-id");t=o(".tutor_select_value_holder").val();o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{question_id:n,question_type:t,action:"tutor_quiz_builder_get_answers_by_question"},beforeSend:function(){e.addClass("tutor-updating-message"),o("#tutor_quiz_question_answer_form").html("")},success:function(t){t.success&&e.html(t.data.output)},complete:function(){e.removeClass("tutor-updating-message")}})})),o(document).on("click",".tutor-quiz-answer-trash-wrap a.answer-trash-btn",(function(t){t.preventDefault();var e=o(this);t=e.attr("data-answer-id");o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{answer_id:t,action:"tutor_quiz_builder_delete_answer"},beforeSend:function(){e.closest(".tutor-quiz-answer-wrap").remove()}})})),o(document).on("click",".tutor-delete-quiz-btn",(function(t){var e;t.preventDefault(),confirm(n("Are you sure?","tutor"))&&(t=(e=o(this)).attr("data-quiz-id"),o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{quiz_id:t,action:"tutor_delete_quiz_by_id"},beforeSend:function(){e.closest(".course-content-item").remove()}}))})),c().init(),o(document).on("change","input.tutor_select_value_holder",(function(t){o(this),o(".add_question_answers_option").trigger("click"),o("#tutor_quiz_question_answers").trigger("refresh")})),o(document).on("click",".tutor-media-upload-btn",(function(t){t.preventDefault();var e,a=o(this);e||(e=wp.media({title:n("Select or Upload Media Of Your Chosen Persuasion","tutor"),button:{text:n("Use this media","tutor")},multiple:!1})).on("select",(function(){var t=e.state().get("selection").first().toJSON();a.html('<img src="'+t.url+'" alt="" />'),a.closest(".tutor-media-upload-wrap").find("input").val(t.id)})),e.open()})),o(document).on("click",".tutor-media-upload-trash",(function(t){t.preventDefault(),(t=o(this)).closest(".tutor-media-upload-wrap").find(".tutor-media-upload-btn").html('<i class="tutor-icon-image1"></i>'),t.closest(".tutor-media-upload-wrap").find("input").val("")}));var l,d=(l=0,function(t,e){clearTimeout(l),l=setTimeout(t,e)});o(document).on("click",".tutor-add-instructor-btn",(function(t){t.preventDefault();var e=o(this);t=o("#post_ID").val();o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{course_id:t,action:"tutor_load_instructors_modal"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){t.success&&(o(".tutor-instructors-modal-wrap .modal-container").html(t.data.output),o(".tutor-instructors-modal-wrap").addClass("show"))},complete:function(){e.removeClass("tutor-updating-message")}})})),o(document).on("change keyup",".tutor-instructors-modal-wrap .tutor-modal-search-input",(function(t){t.preventDefault();var e=o(this),n=o(".tutor-modal-wrap");d((function(){var t=e.val(),a=o("#post_ID").val();o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{course_id:a,search_terms:t,action:"tutor_load_instructors_modal"},beforeSend:function(){n.addClass("loading")},success:function(t){t.success&&(o(".tutor-instructors-modal-wrap .modal-container").html(t.data.output),o(".tutor-instructors-modal-wrap").addClass("show"))},complete:function(){n.removeClass("loading")}})}),1e3)})),o(document).on("click",".add_instructor_to_course_btn",(function(t){t.preventDefault();var e=o(this),n=o(".tutor-modal-wrap");t=o("#post_ID").val();(n=n.find("input").serializeObject()).course_id=t,n.action="tutor_add_instructors_to_course",o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:n,beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){t.success&&(o(".tutor-course-available-instructors").html(t.data.output),o(".tutor-modal-wrap").removeClass("show"))},complete:function(){e.removeClass("tutor-updating-message")}})})),o(document).on("click",".tutor-instructor-delete-btn",(function(t){t.preventDefault();var e=o(this),n=o("#post_ID").val();t=e.closest(".added-instructor-item").attr("data-instructor-id");o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{course_id:n,instructor_id:t,action:"detach_instructor_from_course"},success:function(t){t.success&&e.closest(".added-instructor-item").remove()}})})),o(document).on("click",".settings-tabs-navs li",(function(t){t.preventDefault();var e=o(this),n=e.find("a").attr("data-target");t=e.find("a").attr("href");e.addClass("active").siblings("li.active").removeClass("active"),o(".settings-tab-wrap").removeClass("active").hide(),o(n).addClass("active").show(),window.history.pushState({},"",t)})),o(document).on("lesson_modal_loaded quiz_modal_loaded assignment_modal_loaded",(function(t,e){jQuery().select2&&o(".select2_multiselect").select2({dropdownCssClass:"increasezindex"}),a()})),o(document).on("lesson_modal_loaded",(function(t,e){o(".tutor-lesson-modal-wrap .modal-title h1").html(n("Lesson","tutor"))})),o(document).on("assignment_modal_loaded",(function(t,e){o(".tutor-lesson-modal-wrap .modal-title h1").html(n("Assignment","tutor"))})),o(document).on("keyup change",".tutor-number-validation",(function(t){var e=o(this),n=parseInt(e.val()),a=parseInt(e.attr("data-min")),i=parseInt(e.attr("data-max"));n<a?e.val(a):i<n&&e.val(i)})),o(document).on("click",".tutor-instructor-feedback",(function(t){t.preventDefault();var e=o(this);o.ajax({url:window.ajaxurl||_tutorobject.ajaxurl,type:"POST",data:{attempts_id:e.data("attemptid"),feedback:o(".tutor-instructor-feedback-content").val(),action:"tutor_instructor_feedback"},beforeSend:function(){e.addClass("tutor-updating-message")},success:function(t){t.success&&(e.closest(".course-content-item").remove(),tutor_toast(n("Success","tutor"),e.data("toast_success_message"),"success"))},complete:function(){e.removeClass("tutor-updating-message")}})}));var p=o(".tutor-announcement-add-new"),m=o(".tutor-announcement-edit"),_=o(".tutor-announcement-delete"),f=o(".tutor-announcement-details"),h=o(".tutor-announcement-close-btn"),v=o(".tutor-accouncement-create-modal"),g=o(".tutor-accouncement-update-modal"),w=o(".tutor-accouncement-details-modal");function b(t,e){var o=new URL(window.location.href),n=o.searchParams;return n.set(t,e),o.search=n.toString(),_tutorobject.is_admin?n.set("paged",1):n.set("current_page",1),o.search=n.toString(),o.toString()}o(p).click((function(){v.addClass("show"),o("#tutor-annoucement-backend-create-modal").addClass("show")})),o(f).click((function(){var t=o(this).attr("announcement-date"),e=o(this).attr("announcement-id"),n=o(this).attr("course-id"),a=o(this).attr("course-name"),i=o(this).attr("announcement-title"),r=o(this).attr("announcement-summary");o(".tutor-announcement-detail-content").html("<h3>".concat(i,"</h3><p>").concat(r,"</p>")),o(".tutor-announcement-detail-course-info p").html("".concat(a)),o(".tutor-announcement-detail-date-info p").html("".concat(t)),o("#tutor-announcement-edit-from-detail").attr("announcement-id",e),o("#tutor-announcement-edit-from-detail").attr("course-id",n),o("#tutor-announcement-edit-from-detail").attr("announcement-title",i),o("#tutor-announcement-edit-from-detail").attr("announcement-summary",r),o("#tutor-announcement-delete-from-detail").attr("announcement-id",e),w.addClass("show")})),o(m).click((function(){w&&w.removeClass("show");var t=o(this).attr("announcement-id"),e=o(this).attr("course-id"),n=o(this).attr("announcement-title"),a=o(this).attr("announcement-summary");o("#tutor-announcement-course-id").val(e),o("#announcement_id").val(t),o("#tutor-announcement-title").val(n),o("#tutor-announcement-summary").val(a),g.addClass("show")})),o(h).click((function(){v.removeClass("show"),g.removeClass("show"),w.removeClass("show"),o("#tutor-annoucement-backend-create-modal").removeClass("show")})),o(".tutor-announcements-form").on("submit",(function(t){t.preventDefault();var n=o(this).find('button[type="submit"]');t=o(".tutor-announcements-form").serialize()+"&action=tutor_announcement_create&action_type=create";o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:t,beforeSend:function(){n.addClass("tutor-updating-message")},success:function(t){if(o(".tutor-alert").remove(),"success"==t.status&&location.reload(),"validation_error"==t.status){o(".tutor-announcements-create-alert").append('<div class="tutor-alert alert-warning"></div>');for(var n=0,a=Object.entries(t.message);n<a.length;n++){var i=((i=e(a[n],2))[0],i[1]);o(".tutor-announcements-create-alert .tutor-alert").append("<li>".concat(i,"</li>"))}}"fail"==t.status&&o(".tutor-announcements-create-alert").html("<li>".concat(t.message,"</li>"))},error:function(t){console.log(t)}})})),o(".tutor-announcements-update-form").on("submit",(function(t){t.preventDefault();var n=o(this).find('button[type="submit"]');t=o(".tutor-announcements-update-form").serialize()+"&action=tutor_announcement_create&action_type=update";o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:t,beforeSend:function(){n.addClass("tutor-updating-message")},success:function(t){if(o(".tutor-alert").remove(),"success"==t.status&&location.reload(),"validation_error"==t.status){o(".tutor-announcements-update-alert").append('<div class="tutor-alert alert-warning"></div>');for(var n=0,a=Object.entries(t.message);n<a.length;n++){var i=((i=e(a[n],2))[0],i[1]);o(".tutor-announcements-update-alert > .tutor-alert").append("<li>".concat(i,"</li>"))}}"fail"==t.status&&o(".tutor-announcements-create-alert").html("<li>".concat(t.message,"</li>"))},error:function(){}})})),o(_).click((function(){var t=o(this).attr("announcement-id"),e=o("#tutor-announcement-tr-"+t);confirm("Do you want to delete?")&&o.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{action:"tutor_announcement_delete",announcement_id:t},beforeSend:function(){},success:function(t){e.remove(),w.length&&w.removeClass("show"),"fail"==t.status&&console.log(t.message)},error:function(){}})})),o(".tutor-announcement-course-sorting").on("change",(function(t){window.location=b("course-id",o(this).val())})),o(".tutor-announcement-order-sorting").on("change",(function(t){window.location=b("order",o(this).val())})),o(".tutor-announcement-date-sorting").on("change",(function(t){window.location=b("date",o(this).val())})),o(".tutor-announcement-search-sorting").on("click",(function(t){window.location=b("search",o(".tutor-announcement-search-field").val())})),o(document).click((function(){o(".tutor-dropdown").removeClass("show")})),o(".tutor-dropdown").click((function(t){t.stopPropagation(),o(".tutor-dropdown").hasClass("show")&&o(".tutor-dropdown").removeClass("show"),o(this).addClass("show")}));var y;_=".video_source_wrap_external_url input, .video_source_wrap_vimeo input, .video_source_wrap_youtube input, .video_source_wrap_html5, .video_source_upload_wrap_html5";o("body").on("paste",_,(function(e){e.stopImmediatePropagation();var n=o(this).closest(".lesson-modal-form-wrap").find(".tutor-option-field-video-duration"),a=n.find("label"),i=o(this).hasClass("video_source_wrap_html5")||o(this).hasClass("video_source_upload_wrap_html5"),r=o(this).data("autofill_url");function s(t){t?0==a.find("img").length&&a.append(' <img src="'+window._tutorobject.loading_icon_url+'" style="display:inline-block"/>'):a.find("img").remove()}function u(t){for(var e=Math.floor(t/3600),o=Math.floor((t-3600*e)/60),a=(t=Math.round(t-3600*e-60*o),[e=e<10?"0"+e:e,o=o<10?"0"+o:o,t=t<10?"0"+t:t]),i=n.find("input"),r=0;r<3;r++)i.eq(r).val(a[r])}o(this).data("autofill_url",null);var c,l,d;e=i?o(this).find("span").data("video_url"):r||e.originalEvent.clipboardData.getData("text");i||o(this).parent().hasClass("video_source_wrap_external_url")?((c=document.createElement("video")).addEventListener("loadedmetadata",(function(){u(c.duration),s(!1)})),s(!0),c.src=e):o(this).parent().hasClass("video_source_wrap_vimeo")?(l=(d=e.match(/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/))?d[5]:null)&&(s(!0),o.getJSON("http://vimeo.com/api/v2/video/"+l+"/json",(function(t){Array.isArray(t)&&t[0]&&void 0!==t[0].duration&&u(t[0].duration),s(!1)}))):o(this).parent().hasClass("video_source_wrap_youtube")&&(l=!(!(d=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/))||11!=d[7].length)&&d[7],d=o(this).data("youtube_api_key"),l&&d&&(d="https://www.googleapis.com/youtube/v3/videos?id="+l+"&key="+d+"&part=contentDetails",s(!0),o.getJSON(d,(function(e){"object"==t(e)&&e.items&&e.items[0]&&e.items[0].contentDetails&&e.items[0].contentDetails.duration&&u(function(t){return t=(t=t.match(/PT(\d+H)?(\d+M)?(\d+S)?/)).slice(1).map((function(t){if(null!=t)return t.replace(/\D/,"")})),3600*(parseInt(t[0])||0)+60*(parseInt(t[1])||0)+(parseInt(t[2])||0)}(e.items[0].contentDetails.duration)),s(!1)}))))})).on("input",_,(function(){y&&clearTimeout(y);var t=o(this);y=setTimeout((function(){var e=(e=t.val())?e.trim():"";console.log("Trigger",e),e&&t.data("autofill_url",e).trigger("paste")}),700)})),o(".tutor-form-submit-through-ajax").submit((function(t){t.preventDefault();var e=o(this),a=o(this).attr("action")||window.location.href,i=o(this).attr("method")||"GET";t=o(this).serializeObject();e.find("button").addClass("tutor-updating-message"),o.ajax({url:a,type:i,data:t,success:function(){tutor_toast(n("Success","tutor"),e.data("toast_success_message"),"success")},complete:function(){e.find("button").removeClass("tutor-updating-message")}})})),o.ajaxSetup({data:tutor_get_nonce_data()})})),jQuery.fn.serializeObject=function(){var t={},e=this.serializeArray();return jQuery.each(e,(function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""})),t},window.tutor_toast=function(t,e,o){var n=((window._tutorobject||{}).tutor_url||"")+"assets/images/";jQuery(".tutor-toast-parent").length||jQuery("body").append('<div class="tutor-toast-parent"></div>');var a=jQuery('        <div>            <div>                <img src="'+{success:n+"icon-check.svg",error:n+"icon-cross.svg"}[o]+'"/>            </div>            <div>                <div>                    <b>'+t+"</b>                    <span>"+e+'</span>                </div>            </div>            <div>                <i class="tutor-toast-close tutor-icon-line-cross"></i>            </div>        </div>');a.find(".tutor-toast-close").click((function(){a.remove()})),jQuery(".tutor-toast-parent").append(a),setTimeout((function(){a&&a.fadeOut("fast",(function(){jQuery(this).remove()}))}),5e3)},window.disableAddoption=function(){var t=document.querySelector(".tutor_select_value_holder").value,e=document.getElementById("tutor_quiz_question_answers"),o=document.getElementById("tutor_quiz_question_answer_form"),n=document.querySelector(".add_question_answers_option");("open_ended"===t||"short_answer"===t||("true_false"===t||"fill_in_the_blank"===t)&&(o.hasChildNodes()||e.hasChildNodes())?function(t){t.classList.contains("disabled")||t.classList.add("disabled")}:function(t){t.classList.contains("disabled")&&t.classList.remove("disabled")})(n)}},896:()=>{window.jQuery(document).ready((function(t){var e=wp.i18n.__;t(document).on("click",".tutor-copy-text",(function(o){o.stopImmediatePropagation(),o.preventDefault();var n=t(this).data("text");o=t("<input>");t("body").append(o),o.val(n).select(),document.execCommand("copy"),o.remove(),tutor_toast(e("Copied!","tutor"),n,"success")}))}))}},e={};function o(n){var a=e[n];return void 0!==a||(a=e[n]={exports:{}},t[n](a,a.exports,o)),a.exports}(()=>{"use strict";o(896),o(623),jQuery(document).ready((function(t){var e,o,n,a,i=wp.i18n,r=i.__;function s(t,e){var o,n;1<t.originalEvent.touches.length||(t.preventDefault(),o=t.originalEvent.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(e,!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(n))}i._x,i._n,i._nx,jQuery().select2&&t(".tutor_select2").select2({escapeMarkup:function(t){return t}}),(e=jQuery).support.touch="ontouchend"in document,e.support.touch&&(_=e.ui.mouse.prototype,n=_._mouseInit,a=_._mouseDestroy,_._touchStart=function(t){!o&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(o=!0,this._touchMoved=!1,s(t,"mouseover"),s(t,"mousemove"),s(t,"mousedown"))},_._touchMove=function(t){o&&(this._touchMoved=!0,s(t,"mousemove"))},_._touchEnd=function(t){o&&(s(t,"mouseup"),s(t,"mouseout"),this._touchMoved||s(t,"click"),o=!1)},_._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),n.call(t)},_._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),a.call(t)});var u={ajaxurl:window._tutorobject.ajaxurl,nonce_key:window._tutorobject.nonce_key,video_data:function(){var e=t("#tutor_video_tracking_information").val();return e?JSON.parse(e):{}},track_player:function(){var t,e,o,n=this;"undefined"!=typeof Plyr&&(t=new Plyr("#tutorPlayer"),e=n.video_data(),t.on("ready",(function(t){var o=t.detail.plyr;0<(t=e.best_watch_time)&&o.duration>Math.round(t)&&(o.media.currentTime=t),n.sync_time(o)})),o=0,t.on("timeupdate",(function(t){t=t.detail.plyr,30<=o/4&&(n.sync_time(t),o=0),o++})),t.on("ended",(function(t){var e=n.video_data();t=t.detail.plyr;n.sync_time(t,{is_ended:!0}),e.autoload_next_course_content&&n.autoload_content()})))},sync_time:function(e,o){var n=this.video_data().post_id;(e={action:"sync_video_playback",currentTime:e.currentTime,duration:e.duration,post_id:n})[this.nonce_key]=_tutorobject[this.nonce_key],n=e,o&&(n=Object.assign(e,o)),t.post(this.ajaxurl,n)},autoload_content:function(){var e={action:"autoload_next_course_content",post_id:this.video_data().post_id};e[this.nonce_key]=_tutorobject[this.nonce_key],t.post(this.ajaxurl,e).done((function(t){t.success&&t.data.next_url&&(location.href=t.data.next_url)}))},init:function(){this.track_player()}};function c(t){t.add(t.prevAll()).filter("i").addClass("tutor-icon-star-full").removeClass("tutor-icon-star-line"),t.nextAll().filter("i").removeClass("tutor-icon-star-full").addClass("tutor-icon-star-line")}t("#tutorPlayer").length&&u.init(),t(document).on("change keyup paste",".tutor_user_name",(function(){t(this).val(t(this).val().toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""))})),t(document).on("mouseover",".tutor-star-rating-container .tutor-star-rating-group i",(function(){c(t(this))})),t(document).on("click",".tutor-star-rating-container .tutor-star-rating-group i",(function(){var e=t(this).attr("data-rating-value");t(this).closest(".tutor-star-rating-group").find('input[name="tutor_rating_gen_input"]').val(e),c(t(this))})),t(document).on("mouseout",".tutor-star-rating-container .tutor-star-rating-group",(function(){var e=t(this).find('input[name="tutor_rating_gen_input"]').val(),o=parseInt(e);e=t(this).find('[data-rating-value="'+o+'"]');o&&e&&0<e.length?c(e):t(this).find("i").removeClass("tutor-icon-star-full").addClass("tutor-icon-star-line")})),t(document).on("click",".tutor_submit_review_btn",(function(e){e.preventDefault();var o=t(this),n=o.closest("form").find('input[name="tutor_rating_gen_input"]').val(),a=(a=o.closest("form").find('textarea[name="review"]').val()).trim();e=t('input[name="tutor_course_id"]').val();n&&0!=n&&a?a&&t.ajax({url:_tutorobject.ajaxurl,type:"POST",data:{course_id:e,rating:n,review:a,action:"tutor_place_rating"},beforeSend:function(){o.addClass("updating-icon")},success:function(e){var o=e.data.review_id;e=e.data.review;t(".tutor-review-"+o+" .review-content").html(e),new window.tutor_popup(t,"icon-rating",40).popup({title:r("Thank You for Rating This Course!","tutor"),description:r("Your rating will now be visible in the course page","tutor")}),setTimeout((function(){location.reload()}),3e3)}}):alert(r("Rating and review required","tutor"))})).on("click",".tutor_cancel_review_btn",(function(){t(this).closest("form").hide()})),t(document).on("click",".write-course-review-link-btn",(function(e){e.preventDefault(),t(this).siblings(".tutor-write-review-form").slideToggle()})),t(document).on("click",".tutor-ask-question-btn",(function(e){e.preventDefault(),t(".tutor-add-question-wrap").slideToggle()})),t(document).on("click",".tutor_question_cancel",(function(e){e.preventDefault(),t(".tutor-add-question-wrap").toggle()})),t(document).on("submit","#tutor-ask-question-form",(function(e){e.preventDefault();var o=t(this);(e=t(this).serializeObject()).action="tutor_ask_question",t.ajax({url:_tutorobject.ajaxurl,type:"POST",data:e,beforeSend:function(){o.find(".tutor_ask_question_btn").addClass("updating-icon")},success:function(e){e.success&&(t(".tutor-add-question-wrap").hide(),window.location.reload())},complete:function(){o.find(".tutor_ask_question_btn").removeClass("updating-icon")}})})),t(document).on("submit",".tutor-add-answer-form",(function(e){e.preventDefault();var o=t(this);(e=t(this).serializeObject()).action="tutor_add_answer",t.ajax({url:_tutorobject.ajaxurl,type:"POST",data:e,beforeSend:function(){o.find(".tutor_add_answer_btn").addClass("updating-icon")},success:function(t){t.success&&window.location.reload()},complete:function(){o.find(".tutor_add_answer_btn").removeClass("updating-icon")}})})),t(document).on("focus",".tutor_add_answer_textarea",(function(e){e.preventDefault(),e=t(this).closest(".tutor_add_answer_wrap").attr("data-question-id"),wp.editor.initialize("tutor_answer_"+e,{tinymce:{wpautop:!0,toolbar1:"bold italic underline bullist strikethrough numlist  blockquote  alignleft aligncenter alignright undo redo link unlink spellchecker fullscreen"}})})),t(document).on("click",".tutor_cancel_wp_editor",(function(e){e.preventDefault(),t(this).closest(".tutor_wp_editor_wrap").toggle(),t(this).closest(".tutor_add_answer_wrap").find(".tutor_wp_editor_show_btn_wrap").toggle(),e=t(this).closest(".tutor_add_answer_wrap").attr("data-question-id"),wp.editor.remove("tutor_answer_"+e)})),t(document).on("click",".tutor_wp_editor_show_btn",(function(e){e.preventDefault(),t(this).closest(".tutor_add_answer_wrap").find(".tutor_wp_editor_wrap").toggle(),t(this).closest(".tutor_wp_editor_show_btn_wrap").toggle()}));var l,d,p,m=t("#tutor-quiz-time-update"),_=null;m.length&&(_=JSON.parse(m.attr("data-attempt-settings")),0<(f=JSON.parse(m.attr("data-attempt-meta"))).time_limit.time_limit_seconds?(l=new Date(_.attempt_started_at).getTime()+1e3*f.time_limit.time_limit_seconds,d=new Date(f.date_time_now).getTime(),p=setInterval((function(){var e,o=l-d,n=Math.floor(o/864e5),a=Math.floor(o%864e5/36e5),i=Math.floor(o%36e5/6e4),s=Math.floor(o%6e4/1e3),u="";n&&(u+=n+"d "),a&&(u+=a+"h "),i&&(u+=i+"m "),s&&(u+=s+"s "),o<0&&(clearInterval(p),u="EXPIRED","autosubmit"===_tutorobject.quiz_options.quiz_when_time_expires?t("form#tutor-answering-quiz").submit():"autoabandon"===_tutorobject.quiz_options.quiz_when_time_expires&&(o=t("#tutor_quiz_id").val(),t("#tutor_quiz_remaining_time_secs").val(),o={quiz_id:o,action:"tutor_quiz_timeout"},e=t("#tutor-quiz-time-expire-wrapper").attr("data-attempt-remaining"),t(".tutor-quiz-answer-next-btn, .tutor-quiz-submit-btn, .tutor-quiz-answer-previous-btn").prop("disabled",!0),t(".time-remaining span").css("color","#F44337"),t.ajax({url:_tutorobject.ajaxurl,type:"POST",data:o,success:function(o){var n=t("#tutor-quiz-time-expire-wrapper").data("attempt-allowed"),a=t("#tutor-quiz-time-expire-wrapper").data("attempt-remaining"),i="#tutor-quiz-time-expire-wrapper .tutor-alert";t(i).addClass("show"),0<e?t("".concat(i," .text")).html(r("Your time limit for this quiz has expired, please reattempt the quiz. Attempts remaining: "+a+"/"+n,"tutor")):(t(i).addClass("tutor-alert-danger"),t("#tutor-start-quiz").hide(),t("".concat(i," .text")).html("".concat(r("Unfortunately, you are out of time and quiz attempts. ","tutor"))))},complete:function(){}}))),d+=1e3,m.html(u)}),1e3)):m.closest(".time-remaining").remove());var f=t("#tutor-quiz-body form#tutor-start-quiz");function h(){jQuery().sortable&&(t(".tutor-quiz-answers-wrap").sortable({handle:".answer-sorting-bar",start:function(t,e){e.placeholder.css("visibility","visible")},stop:function(t,e){}}).disableSelection(),t(".quiz-draggable-rand-answers, .quiz-answer-matching-droppable").sortable({connectWith:".quiz-answer-matching-droppable",placeholder:"drop-hover"}).disableSelection())}function v(e){var o,n,a=!0,i=e.find(".quiz-answer-required");return i.length&&((o=i.find("input")).length&&("radio"===(n=o.attr("type"))?0==i.find('input[type="radio"]:checked').length&&(e.find(".answer-help-block").html('<p style="color: #dc3545">'.concat(r("Please select an option to answer","tutor"),"</p>")),a=!1):"checkbox"===n?0==i.find('input[type="checkbox"]:checked').length&&(e.find(".answer-help-block").html('<p style="color: #dc3545">'.concat(r("Please select at least one option to answer.","tutor"),"</p>")),a=!1):"text"===n&&o.each((function(o,n){t(n).val().trim().length||(e.find(".answer-help-block").html('<p style="color: #dc3545">'.concat(r("The answer for this question is required","tutor"),"</p>")),a=!1)}))),i.find("textarea").length&&i.find("textarea").val().trim().length<1&&(e.find(".answer-help-block").html('<p style="color: #dc3545">'.concat(r("The answer for this question is required","tutor"),"</p>")),a=!1),(i=i.find(".quiz-answer-matching-droppable")).length&&i.each((function(o,n){t(n).find(".quiz-draggable-answer-item").length||(e.find(".answer-help-block").html('<p style="color: #dc3545">'.concat(r("Please match all the items","tutor"),"</p>")),a=!1)}))),a}function g(e){var o=!1,n=JSON.parse(atob(window.tutor_quiz_context.split("").reverse().join("")));Array.isArray(n)||(n=[]);var a=e.attr("data-quiz-feedback-mode");t(".wrong-right-text").remove(),t(".quiz-answer-input-bottom").removeClass("wrong-answer right-answer");var i=!0,s=e.find("input"),u=e.find('input[type="radio"]:checked, input[type="checkbox"]:checked');return"retry"===a?(u.each((function(){var e=t(this),o=e.attr("type");"radio"!==o&&"checkbox"!==o||-1<n.indexOf(e.val())||(e.prop("checked")&&e.closest(".quiz-answer-input-bottom").addClass("wrong-answer").append('<span class="wrong-right-text"><i class="tutor-icon-line-cross"></i> '.concat(r("Incorrect, Please try again","tutor"),"</span>")),i=!1)})),s.each((function(){var o,a=t(this);"checkbox"===a.attr("type")&&(o=-1<n.indexOf(a.val()),a=a.is(":checked"),o&&!a&&(e.find(".answer-help-block").html('<p style="color: #dc3545">'.concat(r("More answer for this question is required","tutor"),"</p>")),i=!1))}))):"reveal"===a&&(u.each((function(){var e=t(this);-1<n.indexOf(e.val())||(i=!1)})),s.each((function(){var e,a=t(this),s=a.attr("type");"radio"!==s&&"checkbox"!==s||(e=-1<n.indexOf(a.val()),s=a.is(":checked"),e?a.closest(".quiz-answer-input-bottom").addClass("right-answer").append('<span class="wrong-right-text"><i class="tutor-icon-checkbox-pen-outline"></i>'.concat(r("Correct Answer","tutor"),"</span>")):a.prop("checked")&&a.closest(".quiz-answer-input-bottom").addClass("wrong-answer"),e&&!s&&(a.attr("disabled","disabled"),o=!(i=!1)))}))),o=!!i||o}f.length&&"1"===_tutorobject.quiz_options.quiz_auto_start&&f.submit(),t(document).on("click",".quiz-manual-review-action",(function(e){e.preventDefault();var o=t(this),n=o.attr("data-attempt-id"),a=o.attr("data-attempt-answer-id");e=o.attr("data-mark-as");t.ajax({url:_tutorobject.ajaxurl,type:"GET",data:{action:"review_quiz_answer",attempt_id:n,attempt_answer_id:a,mark_as:e},beforeSend:function(){o.find("i").addClass("updating-icon")},success:function(t){location.reload()},complete:function(){o.find("i").removeClass("updating-icon")}})})),t(".tooltip-btn").on("hover",(function(e){t(this).toggleClass("active")})),t(".tutor-course-title h4 .toggle-information-icon").on("click",(function(e){t(this).closest(".tutor-topics-in-single-lesson").find(".tutor-topics-summery").slideToggle(),e.stopPropagation()})),t(".tutor-course-topic.tutor-active").find(".tutor-course-lessons").slideDown(),t(".tutor-course-title").on("click",(function(){var e=t(this).siblings(".tutor-course-lessons");t(this).closest(".tutor-course-topic").toggleClass("tutor-active"),e.slideToggle()})),t(document).on("click",".tutor-topics-title h3 .toggle-information-icon",(function(e){t(this).closest(".tutor-topics-in-single-lesson").find(".tutor-topics-summery").slideToggle(),e.stopPropagation()})),t(document).on("click",".tutor-course-wishlist-btn",(function(e){e.preventDefault();var o=t(this);e=o.attr("data-course-id");t.ajax({url:_tutorobject.ajaxurl,type:"POST",data:{course_id:e,action:"tutor_course_add_to_wishlist"},beforeSend:function(){o.addClass("updating-icon")},success:function(t){t.success?"added"===t.data.status?o.addClass("has-wish-listed"):o.removeClass("has-wish-listed"):window.location=t.data.redirect_to},complete:function(){o.removeClass("updating-icon")}})})),_tutorobject.enable_lesson_classic_editor||(t(document).on("click",".tutor-single-lesson-a",(function(e){e.preventDefault();var o=t(this),n=(e=o.attr("data-lesson-id"),t("#tutor-single-entry-content"));t.ajax({url:_tutorobject.ajaxurl,type:"POST",data:{lesson_id:e,action:"tutor_render_lesson_content"},beforeSend:function(){var e=o.find(".lesson_title").text();t("head title").text(e),window.history.pushState("obj",e,o.attr("href")),n.addClass("loading-lesson"),t(".tutor-single-lesson-items").removeClass("active"),o.closest(".tutor-single-lesson-items").addClass("active")},success:function(e){n.html(e.data.html),u.init(),t(".tutor-lesson-sidebar").css("display",""),window.dispatchEvent(new window.Event("tutor_ajax_lesson_loaded"))},complete:function(){n.removeClass("loading-lesson")}})})),t(document).on("click",".sidebar-single-quiz-a",(function(e){e.preventDefault();var o=t(this),n=(e=o.attr("data-quiz-id"),o.find(".lesson_title").text()),a=t("#tutor-single-entry-content");t.ajax({url:_tutorobject.ajaxurl,type:"POST",data:{quiz_id:e,action:"tutor_render_quiz_content"},beforeSend:function(){t("head title").text(n),window.history.pushState("obj",n,o.attr("href")),a.addClass("loading-lesson"),t(".tutor-single-lesson-items").removeClass("active"),o.closest(".tutor-single-lesson-items").addClass("active")},success:function(e){a.html(e.data.html),h(),t(".tutor-lesson-sidebar").css("display","")},complete:function(){a.removeClass("loading-lesson")}})}))),t(document).on("click",".tutor-lesson-sidebar-hide-bar",(function(e){e.preventDefault(),t(".tutor-lesson-sidebar").toggle(),t("#tutor-single-entry-content").toggleClass("sidebar-hidden")})),t(".tutor-tabs-btn-group a").on("click touchstart",(function(e){e.preventDefault();var o=t(this);e=o.attr("href");t(".tutor-lesson-sidebar-tab-item").hide(),t(e).show(),t(".tutor-tabs-btn-group a").removeClass("active"),o.addClass("active")})),h(),t(document).on("click",".tutor-quiz-answer-next-btn, .tutor-quiz-answer-previous-btn",(function(e){var o,n;e.preventDefault(),t(this).hasClass("tutor-quiz-answer-previous-btn")?t(this).closest(".quiz-attempt-single-question").hide().prev().show():v(e=(o=t(this)).closest(".quiz-attempt-single-question"))&&g(e)&&(parseInt(o.closest(".quiz-attempt-single-question").attr("id").match(/\d+/)[0],10),!(o=o.closest(".quiz-attempt-single-question").attr("data-next-question-id"))||(n=t(o))&&n.length&&("reveal"===e.attr("data-quiz-feedback-mode")?setTimeout((function(){t(".quiz-attempt-single-question").hide(),n.show()}),800):(t(".quiz-attempt-single-question").hide(),n.show()),t(".tutor-quiz-questions-pagination").length&&(t(".tutor-quiz-question-paginate-item").removeClass("active"),t('.tutor-quiz-questions-pagination a[href="'+o+'"]').addClass("active"))))})),t(document).on("submit","#tutor-answering-quiz",(function(e){var o=t(".quiz-attempt-single-question"),n=!0;o.length&&o.each((function(e,o){n=v(t(o)),n=g(t(o))})),n||e.preventDefault()})),t(document).on("click",".tutor-quiz-question-paginate-item",(function(e){e.preventDefault();var o=t(this);e=t(o.attr("href"));t(".quiz-attempt-single-question").hide(),e.show(),t(".tutor-quiz-question-paginate-item").removeClass("active"),o.addClass("active")})),t(document).on("keyup","textarea.question_type_short_answer, textarea.question_type_open_ended",(function(e){var o=t(this),n=o.val(),a=o.hasClass("question_type_short_answer")?_tutorobject.quiz_options.short_answer_characters_limit:_tutorobject.quiz_options.open_ended_answer_characters_limit,i=a-n.length;i<1&&(o.val(n.substr(0,a)),i=0),o.closest(".tutor-quiz-answers-wrap").find(".characters_remaining").html(i)})),t(".quiz-draggable-rand-answers").length&&t(".quiz-draggable-rand-answers").each((function(){var e=t(this),o=e.height();e.css({height:o})})),t(document).on("submit click",".cart-required-login, .cart-required-login a, .cart-required-login form",(function(e){e.preventDefault(),(e=t(this).data("login_page_url"))?window.location.assign(e):t(".tutor-cart-box-login-form").fadeIn(100)})),t(".tutor-popup-form-close, .login-overlay-close").on("click",(function(){t(".tutor-cart-box-login-form").fadeOut(100)})),t(document).on("keyup",(function(e){27===e.keyCode&&(t(".tutor-frontend-modal").hide(),t(".tutor-cart-box-login-form").fadeOut(100))})),!t.fn.ShareLink||(f=t(".tutor-social-share-wrap")).length&&(x=JSON.parse(f.attr("data-social-share-config")),t(".tutor_share").ShareLink({title:x.title,text:x.text,image:x.image,class_prefix:"s_",width:640,height:480})),jQuery.datepicker&&t(".tutor_report_datepicker").datepicker({dateFormat:"yy-mm-dd"}),t(".withdraw-method-select-input").on("change",(function(e){var o=t(this);t(".withdraw-method-form").hide(),t("#withdraw-method-form-"+o.closest(".withdraw-method-select").attr("data-withdraw-method")).show()})),t(".withdraw-method-select-input").each((function(){var e=t(this);e.is(":checked")&&(t(".withdraw-method-form").hide(),t("#withdraw-method-form-"+e.closest(".withdraw-method-select").attr("data-withdraw-method")).show())})),t(document).on("submit","#tutor-withdraw-account-set-form",(function(e){e.preventDefault();var o=t(this),n=o.find(".tutor_set_withdraw_account_btn");e=o.serializeObject();t.ajax({url:_tutorobject.ajaxurl,type:"POST",data:e,beforeSend:function(){o.find(".tutor-success-msg").remove(),n.addClass("updating-icon")},success:function(t){t.success&&(t='<div class="tutor-success-msg" style="display: none;"><i class="tutor-icon-mark"></i> '+t.data.msg+" </div>",n.closest(".withdraw-account-save-btn-wrap").append(t),o.find(".tutor-success-msg").length&&o.find(".tutor-success-msg").slideDown(),setTimeout((function(){o.find(".tutor-success-msg").slideUp()}),5e3))},complete:function(){n.removeClass("updating-icon")}})})),t(document).on("click",".open-withdraw-form-btn, .close-withdraw-form-btn",(function(e){e.preventDefault(),"yes"!=t(this).data("reload")?(t(".tutor-earning-withdraw-form-wrap").toggle().find('[name="tutor_withdraw_amount"]').val(""),t(".tutor-withdrawal-pop-up-success").hide().next().show(),t("html, body").css("overflow",t(".tutor-earning-withdraw-form-wrap").is(":visible")?"hidden":"auto")):window.location.reload()})),t(document).on("submit","#tutor-earning-withdraw-form",(function(e){e.preventDefault();var o=t(this),n=t("#tutor-earning-withdraw-btn"),a=t(".tutor-withdraw-form-response");e=o.serializeObject();t.ajax({url:_tutorobject.ajaxurl,type:"POST",data:e,beforeSend:function(){o.find(".tutor-success-msg").remove(),n.addClass("updating-icon")},success:function(e){e.success?("undefined"!==e.data.available_balance&&t(".withdraw-balance-col .available_balance").html(e.data.available_balance),t(".tutor-withdrawal-pop-up-success").show().next().hide()):(e='<div class="tutor-error-msg inline-image-text is-inline-block">                            <img src="'+window._tutorobject.tutor_url+'assets/images/icon-cross.svg"/>                             <div>                                <b>Error</b><br/>                                <span>'+e.data.msg+"</span>                            </div>                        </div>",a.html(e),setTimeout((function(){a.html("")}),5e3))},complete:function(){n.removeClass("updating-icon")}})}));var w=t(".tutor-frontend-modal");function b(){jQuery().sortable&&(t(".course-contents").sortable({handle:".course-move-handle",start:function(t,e){e.placeholder.css("visibility","visible")},stop:function(t,e){y()}}),t(".tutor-lessons:not(.drop-lessons)").sortable({connectWith:".tutor-lessons",items:"div.course-content-item",start:function(t,e){e.placeholder.css("visibility","visible")},stop:function(t,e){y()}}))}function y(){var e={};t(".tutor-topics-wrap").each((function(o,n){var a=t(this),i=parseInt(a.attr("id").match(/\d+/)[0],10),r={};a.find(".course-content-item").each((function(e,o){var n=t(this);n=parseInt(n.attr("id").match(/\d+/)[0],10);r[e]=n})),e[o]={topic_id:i,lesson_ids:r}})),t("#tutor_topics_lessons_sorting").val(JSON.stringify(e))}function q(){t("ul.tutor-bp-enrolled-course-list").each((function(){var e,o=t(this),n=o.find(" > li");3<n.length&&(e=n.length-3,n.each((function(e,o){var n=t(this);3<=e&&n.hide()})),e='<a href="javascript:;" class="tutor_bp_plus_courses"><strong>+'+e+" More </strong></a> Courses",o.closest(".tutor-bp-enrolled-courses-wrap").find(".thread-participant-enrolled-info").html(e)),o.show()}))}w.each((function(){var e=t(this),o=t(this).data("popup-rel");t('[href="'+o+'"]').on("click",(function(t){e.fadeIn(),t.preventDefault()}))})),t(document).on("click",".tm-close, .tutor-frontend-modal-overlay, .tutor-modal-btn-cancel",(function(){w.fadeOut()})),t(document).on("click",".tutor-dashboard-element-delete-btn",(function(e){e.preventDefault(),e=t(this).attr("data-id"),t("#tutor-dashboard-delete-element-id").val(e)})),t(document).on("submit","#tutor-dashboard-delete-element-form",(function(e){e.preventDefault();var o=t("#tutor-dashboard-delete-element-id").val(),n=t(".tutor-modal-element-delete-btn");e=t(this).serializeObject();t.ajax({url:_tutorobject.ajaxurl,type:"POST",data:e,beforeSend:function(){n.addClass("updating-icon")},success:function(e){e.success&&t("#tutor-dashboard-"+e.data.element+"-"+o).remove()},complete:function(){n.removeClass("updating-icon"),t(".tutor-frontend-modal").hide()}})})),t("#tutor_profile_photo_id").val()||t(".tutor-profile-photo-delete-btn").hide(),t(document).on("click",".tutor-profile-photo-delete-btn",(function(){return t(".tutor-profile-photo-upload-wrap").find("img").attr("src",_tutorobject.placeholder_img_src),t("#tutor_profile_photo_id").val(""),t(".tutor-profile-photo-delete-btn").hide(),t.ajax({url:_tutorobject.ajaxurl,type:"POST",data:{action:"tutor_profile_photo_remove"}}),!1})),t(document).on("submit","#tutor_assignment_start_form",(function(e){e.preventDefault(),(e=t(this).serializeObject()).action="tutor_start_assignment",t.ajax({url:_tutorobject.ajaxurl,type:"POST",data:e,beforeSend:function(){t("#tutor_assignment_start_btn").addClass("updating-icon")},success:function(t){t.success&&location.reload()},complete:function(){t("#tutor_assignment_start_btn").removeClass("updating-icon")}})})),t(document).on("submit","#tutor_assignment_submit_form",(function(e){t('textarea[name="assignment_answer"]').val().trim().length<1&&(t("#form_validation_response").html('<div class="tutor-error-msg">'+r("Assignment answer can not be empty","tutor")+"</div>"),e.preventDefault())})),t(document).on("click",".video_source_upload_wrap_html5 .video_upload_btn",(function(e){e.preventDefault();var o,n=t(this);o||(o=wp.media({title:r("Select / Upload Media Of Your Chosen Persuasion","tutor"),button:{text:r("Use media","tutor")},library:{type:"video"},multiple:!1})).on("select",(function(){var t=o.state().get("selection").first().toJSON();n.closest(".video_source_upload_wrap_html5").find("span.video_media_id").data("video_url",t.url).text(t.id).trigger("paste").closest("p").show(),n.closest(".video_source_upload_wrap_html5").find("input").val(t.id)})),o.open()})),b(),t(document).on("click",".update_lesson_modal_btn",(function(e){e.preventDefault();var o=t(this),n="tutor_lesson_modal_editor";e=(e=tinyMCE.get(n))?e.getContent():t("#"+n).val();console.log(e),(n=t(this).closest("form").serializeObject()).lesson_content=e,t.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:n,beforeSend:function(){o.addClass("tutor-updating-message")},success:function(e){e.success?(t("#tutor-course-content-wrap").html(e.data.course_contents),b(),t(".tutor-lesson-modal-wrap").removeClass("show"),tutor_toast(r("Done","tutor"),o.data("toast_success_message"),"success")):tutor_toast(r("Failed","tutor"),r("Lesson Update Failed","tutor"),"error")},error:function(){tutor_toast(r("Failed","tutor"),r("Lesson Update Failed","tutor"),"error")},complete:function(){o.removeClass("tutor-updating-message")}})})),t(document).on("click","a.tutor-delete-attachment",(function(e){e.preventDefault(),t(this).closest(".tutor-added-attachment").remove()})),t(document).on("click",".tutorUploadAttachmentBtn",(function(e){e.preventDefault();var o,n=t(this);o||(o=wp.media({title:r("Select / Upload Media Of Your Chosen Persuasion","tutor"),button:{text:r("Use media","tutor")},multiple:!0})).on("select",(function(){var t=o.state().get("selection").toJSON();if(t.length)for(var e=0;e<t.length;e++){var a='<div class="tutor-added-attachment"><i class="tutor-icon-archive"></i><a href="javascript:;" class="tutor-delete-attachment tutor-icon-line-cross"></a> <span> <a href="'+(a=t[e]).url+'">'+a.filename+'</a> </span> <input type="hidden" name="tutor_attachments[]" value="'+a.id+'"></div>';n.closest(".tutor-lesson-attachments-metabox").find(".tutor-added-attachments-wrap").append(a)}})),o.open()})),t("form").on("change",".tutor-assignment-file-upload",(function(){t(this).siblings("label").find("span").html(t(this).val().replace(/.*(\/|\\)/,""))})),t(document).on("click",".tutor-topics-in-single-lesson .tutor-topics-title h3, .tutor-single-lesson-topic-toggle",(function(e){var o=t(this).closest(".tutor-topics-in-single-lesson");o.toggleClass("tutor-topic-active"),o.find(".tutor-lessons-under-topic").slideToggle()})),t(".tutor-single-lesson-items.active").closest(".tutor-lessons-under-topic").show(),t(".tutor-single-lesson-items.active").closest(".tutor-topics-in-single-lesson").addClass("tutor-topic-active"),t(".tutor-course-lesson.active").closest(".tutor-lessons-under-topic").show(),t(document).on("click",".tutor-create-assignments-btn",(function(e){e.preventDefault();var o=t(this),n=t(this).attr("data-topic-id"),a=t("#post_ID").val();t.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{topic_id:n,course_id:a,action:"tutor_load_assignments_builder_modal"},beforeSend:function(){o.addClass("tutor-updating-message")},success:function(e){t(".tutor-lesson-modal-wrap .modal-container").html(e.data.output),t(".tutor-lesson-modal-wrap").attr("data-topic-id",n).addClass("show"),t(document).trigger("assignment_modal_loaded",{topic_id:n,course_id:a}),tinymce.init(tinyMCEPreInit.mceInit.course_description),tinymce.execCommand("mceRemoveEditor",!1,"tutor_assignments_modal_editor"),tinyMCE.execCommand("mceAddEditor",!1,"tutor_assignments_modal_editor")},complete:function(){quicktags({id:"tutor_assignments_modal_editor"}),o.removeClass("tutor-updating-message")}})})),t(document).on("click",".open-tutor-assignment-modal",(function(e){e.preventDefault();var o=t(this),n=o.attr("data-assignment-id"),a=o.attr("data-topic-id"),i=t("#post_ID").val();t.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{assignment_id:n,topic_id:a,course_id:i,action:"tutor_load_assignments_builder_modal"},beforeSend:function(){o.addClass("tutor-updating-message")},success:function(e){t(".tutor-lesson-modal-wrap .modal-container").html(e.data.output),t(".tutor-lesson-modal-wrap").attr({"data-assignment-id":n,"data-topic-id":a}).addClass("show"),t(document).trigger("assignment_modal_loaded",{assignment_id:n,topic_id:a,course_id:i}),tinymce.init(tinyMCEPreInit.mceInit.course_description),tinymce.execCommand("mceRemoveEditor",!1,"tutor_assignments_modal_editor"),tinyMCE.execCommand("mceAddEditor",!1,"tutor_assignments_modal_editor")},complete:function(){quicktags({id:"tutor_assignments_modal_editor"}),o.removeClass("tutor-updating-message")}})})),t(document).on("click",".update_assignment_modal_btn",(function(e){e.preventDefault();var o=t(this),n="tutor_assignments_modal_editor";e=(e=tinyMCE.get(n))?e.getContent():t("#"+n).val();console.log(e),(n=t(this).closest("form").serializeObject()).assignment_content=e,t.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:n,beforeSend:function(){o.addClass("tutor-updating-message")},success:function(e){e.success?(t("#tutor-course-content-wrap").html(e.data.course_contents),b(),t(".tutor-lesson-modal-wrap").removeClass("show"),tutor_toast(r("Done","tutor"),o.data("toast_success_message"),"success")):tutor_toast(r("Failed","tutor"),r("Assignment Update Failed","tutor"),"error")},error:function(){tutor_toast(r("Failed","tutor"),r("Assignment Update Failed","tutor"),"error")},complete:function(){o.removeClass("tutor-updating-message")}})})),t(document).on("click",".add-assignment-attachments",(function(e){e.preventDefault();var o,n=t(this);o||(o=wp.media({title:r("Select / Upload Media Of Your Chosen Persuasion","tutor"),button:{text:r("Use media","tutor")},multiple:!1})).on("select",(function(){var e=o.state().get("selection").first().toJSON(),a='<div class="tutor-individual-attachment-file"><p class="attachment-file-name">'+e.filename+'</p><input type="hidden" name="tutor_assignment_attachments[]" value="'+e.id+'"><a href="javascript:;" class="remove-assignment-attachment-a text-muted"> &times; Remove</a></div>';t("#assignment-attached-file").append(a),n.closest(".video_source_upload_wrap_html5").find("input").val(e.id)})),o.open()})),t(document).on("click",".remove-assignment-attachment-a",(function(e){e.preventDefault(),t(this).closest(".tutor-individual-attachment-file").remove()})),"tutor_add_course_builder"===t('input[name="tutor_action"]').val()&&setInterval((function(){var e=t("form#tutor-frontend-course-builder").serializeObject();e.tutor_ajax_action="tutor_course_builder_draft_save",t.ajax({type:"POST",data:e,beforeSend:function(){t(".tutor-dashboard-builder-draft-btn span").text(r("Saving...","tutor"))},success:function(t){},complete:function(){t(".tutor-dashboard-builder-draft-btn span").text(r("Save","tutor"))}})}),3e4),t(".tutor-course-builder-section-title").on("click",(function(){t(this).find("i").hasClass("tutor-icon-up")?t(this).find("i").removeClass("tutor-icon-up").addClass("tutor-icon-down"):t(this).find("i").removeClass("tutor-icon-down").addClass("tutor-icon-up"),t(this).next("div").slideToggle()})),t(document).on("click",".open-tutor-edit-review-modal",(function(e){e.preventDefault();var o=t(this),n=o.attr("data-review-id"),a=_tutorobject.nonce_key;(e={review_id:n,action:"tutor_load_edit_review_modal"})[a]=_tutorobject[a],t.ajax({url:_tutorobject.ajaxurl,type:"POST",data:e,beforeSend:function(){o.addClass("tutor-updating-message")},success:function(e){void 0!==e.data&&(t(".tutor-edit-review-modal-wrap .modal-container").html(e.data.output),t(".tutor-edit-review-modal-wrap").attr("data-review-id",n).addClass("show"))},complete:function(){o.removeClass("tutor-updating-message")}})})),t(document).on("submit","#tutor_update_review_form",(function(e){e.preventDefault();var o=t(this),n=o.closest(".tutor-edit-review-modal-wrap ").attr("data-review-id");e=_tutorobject.nonce_key;(n={review_id:n,rating:o.find('input[name="tutor_rating_gen_input"]').val(),review:o.find('textarea[name="review"]').val().trim(),action:"tutor_update_review_modal"})[e]=_tutorobject[e],t.ajax({url:_tutorobject.ajaxurl,type:"POST",data:n,beforeSend:function(){o.find('button[type="submit"]').addClass("tutor-updating-message")},success:function(e){e.success&&(t(".tutor-edit-review-modal-wrap").removeClass("show"),location.reload(!0))},complete:function(){o.find('button[type="submit"]').removeClass("tutor-updating-message")}})})),t(document).on("click","#tutor_profile_photo_button",(function(e){e.preventDefault(),t("#tutor_profile_photo_file").trigger("click")})),t(document).on("change","#tutor_profile_photo_file",(function(e){e.preventDefault(),this.files&&this.files[0]&&((e=new FileReader).onload=function(e){t(".tutor-profile-photo-upload-wrap").find("img").attr("src",e.target.result)},e.readAsDataURL(this.files[0]))})),t(document).on("click",".thread-content .subject",(function(e){var o,n=t(this);(o={thread_id:o=parseInt(n.closest(".thread-content").attr("data-thread-id")),action:"tutor_bp_retrieve_user_records_for_thread"})[n=_tutorobject.nonce_key]=_tutorobject[n],t.ajax({type:"POST",url:window._tutorobject.ajaxurl,data:o,beforeSend:function(){t("#tutor-bp-thread-wrap").html("")},success:function(e){e.success&&(t("#tutor-bp-thread-wrap").html(e.data.thread_head_html),q())}})})),q(),t(document).on("click","a.tutor_bp_plus_courses",(function(e){e.preventDefault(),(e=t(this)).closest(".tutor-bp-enrolled-courses-wrap").find(".tutor-bp-enrolled-course-list li").show(),e.closest(".thread-participant-enrolled-info").html("")})),t(".tutor-dropbtn").click((function(){t(this).parent().find(".tutor-dropdown-content").slideToggle(100)})),t(document).on("click",(function(e){var o=t(".tutor-dropdown"),n=o.find(".tutor-dropdown-content");o.is(e.target)||0!==o.has(e.target).length||n.slideUp(100)})),t(document).on("submit",".tutor-login-form-wrap #loginform",(function(e){e.preventDefault();e=t(this);var o=t(".tutor-login-form-wrap");(e=e.serializeObject()).action="tutor_user_login",t.ajax({url:_tutorobject.ajaxurl,type:"POST",data:e,success:function(t){t.success?(location.assign(t.data.redirect),location.reload()):(t=t.data||r("Invalid username or password!","tutor"),o.find(".tutor-alert").length?o.find(".tutor-alert").html(t):o.prepend('<div class="tutor-alert tutor-alert-warning">'+t+"</div>"))}})}));var j,x=t('.tutor-frontend-builder-course-price [name="tutor_course_price_type"]');0==x.length?t("#_tutor_is_course_public_meta_checkbox").show():x.change((function(){var e;t(this).prop("checked")&&(e="paid"==t(this).val()?"hide":"show",t("#_tutor_is_course_public_meta_checkbox")[e]())})).trigger("change"),(j=jQuery).fn.tutor_tooltip=function(){return this.on("mouseenter click",".tooltip",(function(t){t.stopPropagation(),j(this).removeClass("isVisible")})).on("mouseenter focus",":has(>.tooltip)",(function(t){j(this).prop("disabled")||j(this).find(".tooltip").addClass("isVisible")})).on("mouseleave blur keydown",":has(>.tooltip)",(function(t){("keydown"!==t.type||27===t.which)&&j(this).find(".tooltip").removeClass("isVisible")})),this},jQuery(".tutor-tooltip-inside").tutor_tooltip();var k=t(".tutor-course-filter-container form"),z=t(".tutor-course-filter-loop-container"),C={};k.on("submit",(function(t){t.preventDefault()})).find("input").change((function(e){var o=Object.assign(k.serializeObject(),C);o.action="tutor_course_filter_ajax",z.html('<center><img src="'+window._tutorobject.loading_icon_url+'"/></center>'),t(this).closest("form").find(".tutor-clear-all-filter").show(),t.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:o,success:function(e){z.html(e).find(".tutor-pagination-wrap a").each((function(){t(this).attr("data-href",t(this).attr("href")).attr("href","#")}))}})})),z.on("click",".tutor-pagination-wrap a",(function(e){var o=t(this).data("href")||t(this).attr("href");!o||(o=(o=new URL(o)).searchParams.get("paged"))&&(e.preventDefault(),C.page=o,k.find("input:first").trigger("change"))})),z.on("change",'select[name="tutor_course_filter"]',(function(){C.tutor_course_filter=t(this).val(),k.find("input:first").trigger("change")})),0<(x=t(".tutor-course-loop")).length&&("yes"===window.sessionStorage.getItem("tutor_refresh_archive")&&window.location.reload(),window.sessionStorage.removeItem("tutor_refresh_archive"),x.on("click",".tutor-loop-cart-btn-wrap",(function(){window.sessionStorage.setItem("tutor_refresh_archive","yes")}))),0<(x=t("#tutor_profile_cover_photo_editor")).length&&new function(e){this.dialogue_box=e.find("#tutor_photo_dialogue_box"),this.open_dialogue_box=function(t){this.dialogue_box.attr("name",t),this.dialogue_box.trigger("click")},this.validate_image=function(t){return!0},this.upload_selected_image=function(e,o){var n,a,i;o&&this.validate_image(o)&&(n=tutor_get_nonce_data(!0),(a=this).toggle_loader(e,!0),(i=new FormData).append("action","tutor_user_photo_upload"),i.append("photo_type",e),i.append("photo_file",o,o.name),i.append(n.key,n.value),t.ajax({url:window._tutorobject.ajaxurl,data:i,type:"POST",processData:!1,contentType:!1,error:a.error_alert,complete:function(){a.toggle_loader(e,!1)}}))},this.accept_upload_image=function(e,o){var n=o.currentTarget.files[0]||null;e.update_preview(o.currentTarget.name,n),e.upload_selected_image(o.currentTarget.name,n),t(o.currentTarget).val("")},this.delete_image=function(e){var o=this;o.toggle_loader(e,!0),t.ajax({url:window._tutorobject.ajaxurl,data:{action:"tutor_user_photo_remove",photo_type:e},type:"POST",error:o.error_alert,complete:function(){o.toggle_loader(e,!1)}})},this.update_preview=function(t,o){var n=e.find("cover_photo"==t?"#tutor_cover_area":"#tutor_profile_area");if(!o)return n.css("background-image","url("+n.data("fallback")+")"),void this.delete_image(t);(t=new FileReader).onload=function(t){n.css("background-image","url("+t.target.result+")")},t.readAsDataURL(o)},this.toggle_profile_pic_action=function(t){e[void 0===t?"toggleClass":t?"addClass":"removeClass"]("pop-up-opened")},this.error_alert=function(){alert("Something Went Wrong.")},this.toggle_loader=function(t,o){e.find("#tutor_photo_meta_area .loader-area").css("display",o?"block":"none")},this.initialize=function(){var t=this;this.dialogue_box.change((function(e){t.accept_upload_image(t,e)})),e.find("#tutor_profile_area .tutor_overlay, #tutor_pp_option>div:last-child").click((function(){t.toggle_profile_pic_action()})),e.find(".tutor_cover_uploader").click((function(){t.open_dialogue_box("cover_photo")})),e.find(".tutor_pp_uploader").click((function(){t.open_dialogue_box("profile_photo")})),e.find(".tutor_cover_deleter").click((function(){t.update_preview("cover_photo",null)})),e.find(".tutor_pp_deleter").click((function(){t.update_preview("profile_photo",null)}))}}(x).initialize(),t(".tutor-instructor-filter").each((function(){var e,o=t(this),n={};function a(e,a,i){var r=o.find(".filter-result-container"),s=r.html(),u=o.data();u.current_page=i||1,e?n[e]=a:n={},n.attributes=u,n.action="load_filtered_instructor",r.html('<div style="text-align:center"><img src="'+window._tutorobject.loading_icon_url+'"/></div>'),t.ajax({url:window._tutorobject.ajaxurl,data:n,type:"POST",success:function(t){r.html(t)},error:function(){r.html(s),tutor_toast("Failed","Request Error","error")}})}o.on("change",'.course-category-filter [type="checkbox"]',(function(){var e={};t(this).closest(".course-category-filter").find("input:checked").each((function(){e[t(this).val()]=t(this).parent().text()}));var n=o.find(".selected-cate-list").empty(),i=Object.keys(e);i.forEach((function(t){n.append("<span>"+e[t]+' <span class="tutor-icon-line-cross" data-cat_id="'+t+'"></span></span>')})),i.length&&n.append('<span data-cat_id="0">Clear All</span>'),a(t(this).attr("name"),i)})).on("click",".selected-cate-list [data-cat_id]",(function(){var e=t(this).data("cat_id"),n=o.find('.mobile-filter-popup [type="checkbox"]');(n=e?n.filter('[value="'+e+'"]'):n).prop("checked",!1).trigger("change")})).on("input",'.filter-pc [name="keyword"]',(function(){var o=t(this).val();e&&window.clearTimeout(e),e=window.setTimeout((function(){a("keyword",o),e=null}),500)})).on("click","[data-page_number]",(function(e){e.preventDefault(),a(null,null,t(this).data("page_number"))})).on("click",".clear-instructor-filter",(function(){var e=t(this).closest(".tutor-instructor-filter");e.find('input[type="checkbox"]').prop("checked",!1),e.find('[name="keyword"]').val(""),a()})).on("click",".mobile-filter-container i",(function(){t(this).parent().next().addClass("is-opened")})).on("click",".mobile-filter-popup button",(function(){t('.mobile-filter-popup [type="checkbox"]').trigger("change"),t(this).closest(".mobile-filter-popup").removeClass("is-opened")})).on("input",'.filter-mobile [name="keyword"]',(function(){o.find('.filter-pc [name="keyword"]').val(t(this).val()).trigger("input")})).on("change",'.mobile-filter-popup [type="checkbox"]',(function(e){var n,a;e.originalEvent||(n=t(this).attr("name"),a=t(this).val(),e=t(this).prop("checked"),o.find('.course-category-filter [name="'+n+'"]').filter('[value="'+a+'"]').prop("checked",e).trigger("change"))})).on("mousedown touchstart",".expand-instructor-filter",(function(e){var n=t(window).height(),a=o.find(".mobile-filter-popup>div"),i=n-a.height(),r=((e.originalEvent.touches||[])[0]||e).clientY-i;o.on("mousemove touchmove",(function(t){t=((t.originalEvent.touches||[])[0]||t).clientY,200<(t=n-t+r)&&t<=n&&a.css("height",t+"px")}))})).on("mouseup touchend",(function(){o.off("mousemove touchmove")})).on("click",".mobile-filter-popup>div",(function(t){t.stopImmediatePropagation()})).on("click",".mobile-filter-popup",(function(e){t(this).removeClass("is-opened")}))})),t(".tutor-course-retake-button").click((function(e){e.preventDefault();var o=(e=t(this)).attr("href"),n=e.data("course_id"),a=(e={title:r("Override Previous Progress","tutor"),description:r("Before continue, please decide whether to keep progress or reset.","tutor"),buttons:{reset:{title:r("Reset Data","tutor"),class:"secondary",callback:function(){var e=a.find(".tutor-button-secondary");e.prop("disabled",!0).append('<img style="margin-left: 7px" src="'+window._tutorobject.loading_icon_url+'"/>'),t.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:{action:"tutor_reset_course_progress",course_id:n},success:function(t){t.success?window.location.assign(t.data.redirect_to):alert((t.data||{}).message||r("Something went wrong","tutor"))},complete:function(){e.prop("disabled",!1).find("img").remove()}})}},keep:{title:r("Keep Data","tutor"),class:"primary",callback:function(){window.location.assign(o)}}}},new window.tutor_popup(t,"icon-gear",40).popup(e))})),document.body.addEventListener("click",(function(e){var o,n=e.target,a=n.tagName,i=n.parentElement.tagName;0<m.length&&"EXPIRED"!=m.html()&&("A"!==a&&"A"!==i||(e.preventDefault(),e.stopImmediatePropagation(),e={title:r("Abandon Quiz?","tutor"),description:r("Do you want to abandon this quiz? The quiz will be submitted partially up to this question if you leave this page.","tutor"),buttons:{keep:{title:r("Yes, leave quiz","tutor"),id:"leave",class:"secondary",callback:function(){var e=t("form#tutor-answering-quiz").serialize()+"&action=tutor_quiz_abandon";t.ajax({url:window._tutorobject.ajaxurl,type:"POST",data:e,beforeSend:function(){document.querySelector("#tutor-popup-leave").innerHTML=r("Leaving...","tutor")},success:function(t){t.success?null==n.href?location.href=n.parentElement.href:location.href=n.href:alert(r("Something went wrong","tutor"))},error:function(){alert(r("Something went wrong","tutor")),o.remove()}})}},reset:{title:r("Stay here","tutor"),id:"reset",class:"primary",callback:function(){o.remove()}}}},o=new window.tutor_popup(t,"",40).popup(e)))})),t("body").on("submit","form#tutor-start-quiz",(function(){t(this).find("button").prop("disabled",!0)}))}))})()})();